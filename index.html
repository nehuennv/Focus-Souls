<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Focus Souls</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="dynamic-bg"></div>

    
    <div id="splash-screen" class="screen">
        <div class="splash-content">
            <!-- <h2 class="splash-title">FOCUS SOULS</h2> -->
            <img class="splash-logo desktop-only" src="img/logo.svg" alt="">
            <img class="splash-logo mobile-only" src="./img/logoMobile.svg"  alt="">
            <p class="splash-subtitle desktop-only">PRESIONA CUALQUIER TECLA PARA COMENZAR</p>
            <p class="splash-subtitle mobile-only" >TOCA PARA DESPERTAR</p>
            <div class="splash-aura"></div>
        </div>
    </div>

    

<!-- PANTALLA PRINCIPAL MINIMALISTA -->
<main id="lobby-screen" class="screen">
    <!-- <h1 class="main-title">FOCUS SOULS</h1> -->
    <img id="logo-main-screen" class="desktop-only" src="img/logo.svg" alt="">
    <img src="./img/logoMobile.svg" class="mobile-only" alt="">
    
    <!-- NUEVO MENÚ MINIMALISTA -->
    <div class="lobby-menu">
        <button class="menu-option" data-action="start">Comenzar ritual</button>
        <button class="menu-option" data-action="bestiary">Bestiario</button>
        <button class="menu-option" data-action="logros">Sala de trofeos</button>
        <button class="menu-option" data-action="instructions">Tomo de iniciación</button>



    </div>

    <!-- MODAL PARA SELECCIONAR HORAS (OCULTO INICIALMENTE) -->
    <div id="pact-modal" class="screen hidden message-screen">
        <div class="modal-content">
            <h2 style="margin-bottom: 0;">SELLA TU PACTO</h2>
            <hr class="bestiary-divider">
            <label ">¿A QUÉ BESTIA TE ENFRENTARÁS?</label>
            <!-- Botón para abrir el selector estilo Street Fighter -->
            <div class="boss-selector-trigger" id="open-boss-selector">
                <div id="selected-boss-preview" class="selected-boss-preview">
                    <div class="boss-preview-image">
                        <!-- CAMBIO: src inicial con la imagen de aleatorio -->
                        <img id="selected-boss-preview-img" src="img/random-icon.png" alt="Jefe seleccionado">
                    </div>
                    <span id="selected-boss-preview-name">ALEATORIO</span>
                </div>
            </div>
            <label for="hours-offering" style="margin-top: 2rem;">¿CUÁL ES TU OFRENDA?</label>
            
            <div  class="select-wrapper">
                <select id="hours-offering">
                    <option value="" disabled selected>ELIGE TU OFRENDA</option>
                    <!-- Las horas se cargan automáticamente por JavaScript -->
                </select>
            </div>
            <!-- EN EL MODAL DEL PACTO (después del select de horas) -->
            <label style="margin-top: 2rem;" for="class-offering">¿QUÉ DOMINIO DESEAS CONQUISTAR?</label>
            <div class="select-wrapper">
                <select id="class-offering">
                    <option value="" disabled selected>ELIGE UN CAMPO DE SABER</option>
                    <!-- Las materias se cargan desde localStorage -->
                </select>
            </div>
            <button id="manage-classes-btn" class="ghost-button">
                GESTIONAR DOMINIOS
            </button>


            <!-- Modal de selección de jefes estilo Street Fighter -->
            <div id="boss-selection-modal" class="screen hidden boss-selection-modal">
                <div class="modal-content" style="max-width: 900px; width: 95%; align-items: stretch;">
                    <h2 class="modal-title">SELECCIONA TU BESTIA</h2>
                    <hr class="bestiary-divider">
                    <div class="boss-selection-header">
                        <div class="selected-boss-display">
                            <div class="boss-portrait-large">
                                <img id="modal-selected-boss-img" src="img/random-icon.png" alt="Jefe seleccionado">
                            </div>
                            <div class="boss-info-large">
                                <h3 id="modal-selected-boss-name">Aleatorio</h3>
                                <p id="modal-selected-boss-desc">El destino elegirá tu oponente</p>
                            </div>
                        </div>
                    </div>
                    
                    <div id="boss-selection-grid" class="boss-selection-grid">
                        <!-- La opción Aleatorio -->
                        <div class="boss-selection-option active" data-boss-id="random">
                            <div class="boss-portrait">
                                <img src="img/random-icon.png" alt="Aleatorio">
                                <div class="boss-selection-overlay">
                                    <span>Aleatorio</span>
                                </div>
                            </div>
                        </div>
                        <!-- Las opciones de jefes se cargarán dinámicamente -->
                    </div>
                    <hr class="bestiary-divider">
                    <div class="boss-selection-actions">
                        <button id="confirm-boss-selection" class="gold-button">CONFIRMAR SELECCIÓN</button>
                        <button id="close-boss-selection" class="ghost-button">CANCELAR</button>
                    </div>
                </div>
            </div>
            <hr class="bestiary-divider">
            <div class="modal-actions">
                <button id="confirm-pact-btn" class="gold-button">INICIAR RITUAL</button>
                <button id="cancel-pact-btn" class="ghost-button">DESISTIR </button>
            </div>
        </div>
    </div>
    
    <!-- CRÉDITOS (SE MANTIENE IGUAL) -->
    <div class="credits">
        FOCUS SOULS™ & <a href="https://www.instagram.com/nehuenvg/">©NEHUEN VILLAVICENCIO</a> Entertaiment Inc/ © 2025-2025 Software Inc
    </div>
    
    <!-- EFECTO DE CHISPAS (SE MANTIENE IGUAL) -->
    <div id="sparks-container"></div>
</main>

    <main id="battle-screen" class="screen hidden">
        <div id="background-container" class="background-container"></div>
        <div class="vignette"></div>  <!-- ← AGREGAR ESTA LÍNEA -->

        <nav id="action-navbar" class="action-navbar">
            <button id="back-to-menu-btn" class="desktop-only">Romper Pacto</button>
            <button id="back-to-menu-btn-mobile" class="mobile-only"><img src="img/backMobile.svg" alt=""></button>
            
            <hr class="bestiary-divider2 ">
            
            <div class="load-time-controls">
                <button class="load-time-btn" data-time="10">+10 MIN</button>
                <button class="load-time-btn" data-time="30">+30 MIN</button>
                <button class="load-time-btn" data-time="60">+60 MIN</button>
                <button id="launch-attack-btn" class="desktop-only" disabled>LANZAR ATAQUE</button>
            </div>
            
            <hr class="bestiary-divider2">
            
            <button id="pause-btn" class="load-time-btn">❚❚</button>
        </nav>
        <button id="launch-attack-btn-mobile" class="mobile-only launch-attack-mobile" disabled>LANZAR ATAQUE</button>
        <section class="center-area">
            <div id="boss-image-container">
                <img id="boss-image" src="" alt="Jefe de Batalla">
            </div>
            <!-- <button id="pause-btn" class="pause-button hidden" title="Pausar ritual">
                <span>❚❚</span>
            </button> -->
            <!-- CONTENEDOR DE PARTÍCULAS DEL TIMER -->
            <div id="timer-particles-container" class="timer-particles-container"></div>
            
            <div class="timer-display">
                <span class="timer-minutes">00</span>
                <span class="timer-colon">:</span>
                <span class="timer-seconds">00</span>
            </div>
        </section>

            <footer class="battle-footer">
                <div id="boss-name-container">
                    <div class="boss-name-wrapper">
                        <span id="boss-name"></span>
                        <!-- <button id="boss-info-btn" class="info-btn" title="Conocer el lore del jefe">
                            <span>ⓘ</span>
                        </button> -->
                    </div>
                </div>
                <div id="health-bar-container">
                    <div id="health-bar-inner"></div>
                    <div id="health-bar-tooltip" class="health-tooltip">
                        <span id="health-time-remaining">0 min</span>
                    </div>
                </div>
            </footer>
        </div>
    </main>

    <div id="message-screen" class="screen hidden message-screen">
        <h2 id="message-title"></h2>
        
        <!-- CONTENEDOR DE FOGATA Y TIMER -->
        <div id="bonfire-container" class="bonfire-container hidden">
            <div class="bonfire-content">
                <img src="img/bonefire.gif" alt="Fogata" class="bonfire-gif">
                <div class="break-timer-wrapper">
                    <div class="break-timer-display">
                        <span id="break-timer">05:00</span>
                    </div>
                    <p class="break-text">DESCANSO DEL GUERRERO</p>
                </div>
            </div>
        </div>
        
        <div id="confirmation-buttons" class="confirmation-buttons hidden">
            <button id="confirm-yes-btn" class="ghost-button" ></button>
            <button id="confirm-no-btn" class="gold-button"></button>
        </div>
    </div>

    <div id="instructions-screen" class="screen hidden instructions-modal">
        <div class="modal-content instructions-modal-content">
            <h2 class="modal-title">EL PACTO DE LA VOLUNTAD</h2>
            
            <div class="instructions-content">
                <hr class="bestiary-divider">

                <div class="instruction-step">
                    <h3>I. EL JURAMENTO</h3>
                    <p>La esencia de nuestro mundo es el <strong>Foco</strong>. Sella un pacto, jurando una <strong>Ofrenda de Horas</strong> a tu concentración. Cada hora comprometida es un juramento; romperlo trae consecuencias.</p>
                </div>
                <div class="instruction-step">
                    <h3>II. LA CAZA ETERNA</h3>
                    <p>Tu voluntad invoca una <strong>Bestia de la Distracción</strong>. Carga tu <strong>Esencia</strong> (minutos de foco puro) y <strong>Lanza un Ataque</strong> para mermar su vitalidad. Si la batalla se extiende, canaliza <strong>+10 minutos</strong> para golpes continuos.</p>
                </div>
                <div class="instruction-step">
                    <h3>III. EL REPOSO Y LA PERSEVERANCIA</h3>
                    <p>Tras cada golpe, concede a tu espíritu un <strong>descanso de 5 minutos</strong> junto a la fogata. Medita, recupera fuerzas, y prepárate para la siguiente embestida. La perseverancia forja el espíritu.</p>
                </div>
                <div class="instruction-step">
                    <h3>IV. LA ASCENSIÓN</h3>
                    <p>Cada minuto de foco acumulado te acerca a la victoria y forja tu leyenda. Tu progreso en la <strong>Senda del Foco</strong> se registrará en el <strong>Bestiario del Pacto</strong>, revelando tu Rango y las Bestias caídas.</p>
                </div>
                <hr class="bestiary-divider">
            </div>

            <button id="close-instructions-btn" class="modal-close-btn">VOLVER            </button>
        </div>
    </div>
    <div id="lore-screen" class="screen hidden instructions-modal">
        <div class="modal-content">
            <h2 id="lore-title"></h2>
            <hr class="bestiary-divider" style="width: 55%; opacity: 0.5;">
            <div class="lore-content" >
                <p id="lore-text"></p>
            </div>
            <hr class="bestiary-divider" style="width: 55%; opacity: 0.5;">

            <button id="close-lore-btn" class="modal-close-btn">VOLVER AL RITUAL</button>
        </div>
    </div>

    
    <div id="bestiary-modal" class="screen hidden">
        <div class="modal-content" style="width: 95vw; height: 95vh; max-width: 1400px; ">
            <h2 class="modal-title" style="margin-bottom: 2rem;">BESTIARIO DEL PACTO</h2>
            
            <div id="bestiary-stats" style="flex: 1; overflow: hidden;">
                <!-- El contenido se genera dinámicamente -->
            </div>
            
            <button id="close-bestiary-btn" class="modal-close-btn">VOLVER</button>
        </div>
    </div>
    <div id="class-modal" class="screen hidden">
        <div class="modal-content class-dashboard" style="width: 60%; height: 95vh; max-width: 1800px; display: flex; flex-direction: column; padding: 1.5rem;">
            <!-- HEADER COMPACTO -->
            <div style="display: flex; flex-direction: column;justify-content: space-between; align-items: center;">
                <h2 class="modal-title" style="margin: 0;">CÓDICE DE DOMINIOS</h2>
                <div style="display: flex; gap: 2rem; align-items: center;">
                    <span style="color: var(--color-gold); font-family: var(--font-body);">
                        <span id="class-count">0</span>/50 <strong style="font-weight: 100; color: #F5E6CA;">DOMINIOS</strong>
                    </span>
                    <span style="color: var(--color-parchment);">
                        TIEMPO TOTAL: <span id="total-class-time" style="color: var(--color-gold); font-family: var(--font-body);">0h 0m</span>
                    </span>
                </div>
            </div>
    
            <hr class="bestiary-divider">
    
            <!-- FORMULARIO COMPACTO EN LÍNEA -->
            <div style="display: flex; flex-direction: column;gap: 1rem; align-items: center; padding: 0 0.5rem; margin-bottom: 3px;">
                <h4 style="color: var(--color-gold); margin: 0; white-space: nowrap; font-size: 1.5rem;">FORJAR NUEVO DOMINIO:</h4>
                <input maxlength="26" type="text" id="new-class-name" 
                placeholder="Ej: Las Runas de Álgebra Antigua"
                pattern="[A-Za-z0-9áéíóúÁÉÍÓÚñÑ .]*"
                title="Solo letras, números, puntos y espacios"
                style="flex: 1; border:none; border-bottom: 1px solid var(--color-gold); font-size:1.1rem; padding: 0.3rem; width: 100%; background: none;">
                <button id="add-class-btn" class="gold-button" style="white-space: nowrap; padding-block: 0.3rem; width: 100%; font-size: 1.1rem;">
                    FORJAR
                </button>
            </div>
    
            <hr class="bestiary-divider">

            <!-- DASHBOARD PRINCIPAL - GRID HORIZONTAL -->
            <div class="dashboard-grid" style="width: 95%;padding-inline: 4rem;flex: 1; overflow-x: hidden; display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); grid-auto-rows: 120px; gap: 1rem;">
                <!-- Las tarjetas se cargarán aquí dinámicamente -->
            </div>
    
            <!-- ESTADO VACÍO CENTRADO -->
            <div id="no-classes-message" class="no-classes-message" style="display: none; text-align: center; padding: 2rem; color: var(--color-parchment); flex: 1; display: flex; align-items: center; justify-content: center;">
                <div class="empty-state">
                    <span style="font-size: 2.5rem; display: block; margin-bottom: 0.5rem; opacity: 0.5;">📚</span>
                    <h3 style="color: var(--color-gold); font-family: var(--font-title); margin: 0 0 0.3rem 0; font-size: 1.2rem;">EL CÓDICE ESTÁ VACÍO</h3>
                    <p style="margin: 0; font-size: 0.9rem;">Forja tu primer dominio para comenzar tu legado</p>
                </div>
            </div>
    
            <button id="close-class-modal-btn" class="modal-close-btn" style="margin-top: 1rem; align-self: center; width: auto; padding: 0.3rem 3rem;">
                RETORNAR AL JURAMENTO
            </button>
        </div>
    </div>
    <div id="toast-container"></div>
    <!-- MODAL DE LOGROS -->
<div id="logros-modal" class="screen hidden message-screen">
    <div class="modal-content instructions-modal-content">
        <h2 class="modal-title" style="margin-bottom: 0;">SALA DE TROFEOS</h2>
        <hr class="bestiary-divider" style="margin-bottom:1px; width: 80%;">
        
        <div id="trofeos-container" class="instructions-content" >
            <div id="logros-list" class="logros-list">
                <!-- Los logros se cargan aquí dinámicamente -->
            </div>
        </div>
        <hr class="bestiary-divider" style="margin-top: 1px; width: 80%;">
        <button id="close-logros-btn" class="modal-close-btn">VOLVER</button>
    </div>
</div>

<!-- Audio elements -->
<audio id="hover-sound" preload="auto">
    <source src="sounds/hover-mouse.mp3" type="audio/mpeg">
</audio>
<audio id="click-sound" preload="auto">
    <source src="sounds/click-mouse.mp3" type="audio/mpeg">
</audio>
<audio id="bell-sound" preload="auto">
    <source src="sounds/bell.mp3" type="audio/mpeg">
</audio>
<audio id="bonfire-sound" preload="auto">
    <source src="sounds/bonefire.mp3" type="audio/mpeg">
</audio>
<audio id="start-game-sound" preload="auto">
    <source src="sounds/start-game.mp3" type="audio/mpeg">
</audio>
<audio id="start-battle-sound" preload="auto">
    <source src="sounds/start-battle.mp3" type="audio/mpeg">
</audio>
<audio id="toast-sound" preload="auto">
    <source src="sounds/toast.mp3" type="audio/mpeg">
</audio>
<audio id="go-to-menu-sound" preload="auto">
    <source src="sounds/gotomenu.mp3" type="audio/mpeg">
</audio>


    <script src="script.js"></script>
</body>
<!-- PANEL DE DEBUG - TESTER HELPER -->
<div id="debug-panel" class="debug-panel hidden">
    <div class="debug-header">
        <h3>🧪 MODO TESTER</h3>
        <button id="debug-close" class="debug-close">×</button>
    </div>
    
    <div class="debug-section">
        <h4>Configuración Rápida</h4>
        <div class="debug-buttons">
            <button class="debug-btn" data-action="quick-test">🚀 Test Rápido</button>
            <button class="debug-btn" data-action="instant-victory">🏆 Victoria Instantánea</button>
            <button class="debug-btn" data-action="reset-game">🔄 Reiniciar</button>
        </div>
    </div>

    <div class="debug-section">
        <h4>Vida del Jefe</h4>
        <div class="debug-input-group">
            <input type="number" id="debug-boss-health" value="5" min="1" max="480">
            <span>minutos</span>
            <button class="debug-btn small" data-action="set-boss-health">Aplicar</button>
        </div>
    </div>

    <div class="debug-section">
        <h4>Ataque Cargado</h4>
        <div class="debug-input-group">
            <input type="number" id="debug-loaded-time" value="10" min="1" max="120">
            <span>minutos</span>
            <button class="debug-btn small" data-action="set-loaded-time">Aplicar</button>
        </div>
    </div>

    <div class="debug-section">
        <h4>Estado Actual</h4>
        <div id="debug-status" class="debug-status">
            Esperando inicio de batalla...
        </div>
    </div>

    <div class="debug-section">
        <h4>Bestiario (Debug)</h4>
        <div class="debug-buttons">
            <button class="debug-btn" data-action="add-random-kills">🎯 Agregar Kills Random</button>
            <button class="debug-btn" data-action="clear-stats">🗑️ Limpiar Stats</button>
            <button class="debug-btn" data-action="show-stats">📊 Ver Stats</button>
        </div>
    </div>
</div>

<!-- Botón flotante para abrir el panel de debug -->
<!-- <button id="debug-toggle" class="debug-toggle" title="Abrir panel de debug">
    🐛
</button> -->
<button id="debug-toggle" title="Abrir panel de debug">
    
</button>
</html>